{
  "editable": true,
  "id": null,
  "panels": [
    {
      "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" },
      "fieldConfig": {
        "defaults": { "decimals": 0, "unit": "s" }
      },
      "gridPos": { "h": 4, "w": 4, "x": 0, "y": 0 },
      "id": 1,
      "targets": [
        { "expr": "time() - node_boot_time_seconds{site=\"$site\"}", "refId": "A" }
      ],
      "title": "Uptime",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" },
      "fieldConfig": {
        "defaults": {
          "max": 100, "min": 0, "unit": "percent",
          "thresholds": { "mode": "absolute", "steps": [
            { "color": "green", "value": null },
            { "color": "yellow", "value": 70 },
            { "color": "red", "value": 90 }
          ]}
        }
      },
      "gridPos": { "h": 4, "w": 4, "x": 4, "y": 0 },
      "id": 2,
      "targets": [
        { "expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\",site=\"$site\"}[1m])) * 100)", "refId": "A" }
      ],
      "title": "CPU Usage",
      "type": "gauge"
    },
    {
      "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" },
      "fieldConfig": {
        "defaults": {
          "max": 100, "min": 0, "unit": "percent",
          "thresholds": { "mode": "absolute", "steps": [
            { "color": "green", "value": null },
            { "color": "yellow", "value": 70 },
            { "color": "red", "value": 90 }
          ]}
        }
      },
      "gridPos": { "h": 4, "w": 4, "x": 8, "y": 0 },
      "id": 3,
      "targets": [
        { "expr": "(1 - (node_memory_MemAvailable_bytes{site=\"$site\"} / node_memory_MemTotal_bytes{site=\"$site\"})) * 100", "refId": "A" }
      ],
      "title": "Memory Usage",
      "type": "gauge"
    },
    {
      "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" },
      "fieldConfig": {
        "defaults": {
          "max": 100, "min": 0, "unit": "percent",
          "thresholds": { "mode": "absolute", "steps": [
            { "color": "green", "value": null },
            { "color": "yellow", "value": 70 },
            { "color": "red", "value": 90 }
          ]}
        }
      },
      "gridPos": { "h": 4, "w": 4, "x": 12, "y": 0 },
      "id": 4,
      "targets": [
        { "expr": "(1 - (node_filesystem_avail_bytes{mountpoint=\"/\",site=\"$site\"} / node_filesystem_size_bytes{mountpoint=\"/\",site=\"$site\"})) * 100", "refId": "A" }
      ],
      "title": "Disk Usage",
      "type": "gauge"
    },
    {
      "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" },
      "fieldConfig": {
        "defaults": {
          "max": 100, "min": 0, "unit": "celsius",
          "thresholds": { "mode": "absolute", "steps": [
            { "color": "green", "value": null },
            { "color": "yellow", "value": 60 },
            { "color": "red", "value": 80 }
          ]}
        }
      },
      "gridPos": { "h": 4, "w": 4, "x": 16, "y": 0 },
      "id": 5,
      "targets": [
        { "expr": "node_hwmon_temp_celsius{site=\"$site\"}", "refId": "A" }
      ],
      "title": "CPU Temperature",
      "type": "gauge"
    },
    {
      "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" },
      "fieldConfig": {
        "defaults": {
          "decimals": 2,
          "thresholds": { "mode": "absolute", "steps": [
            { "color": "green", "value": null },
            { "color": "yellow", "value": 2 },
            { "color": "red", "value": 4 }
          ]}
        }
      },
      "gridPos": { "h": 4, "w": 4, "x": 20, "y": 0 },
      "id": 6,
      "targets": [
        { "expr": "node_load1{site=\"$site\"}", "refId": "A" }
      ],
      "title": "Load Average (1m)",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" },
      "fieldConfig": {
        "defaults": {
          "custom": { "drawStyle": "line", "fillOpacity": 20, "lineWidth": 2 },
          "max": 100, "min": 0, "unit": "percent"
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 4 },
      "id": 7,
      "targets": [
        { "expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\",site=\"$site\"}[1m])) * 100)", "legendFormat": "CPU %", "refId": "A" }
      ],
      "title": "CPU Usage Over Time",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" },
      "fieldConfig": {
        "defaults": {
          "custom": { "drawStyle": "line", "fillOpacity": 20, "lineWidth": 2, "stacking": { "mode": "normal" } },
          "unit": "bytes"
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 4 },
      "id": 8,
      "targets": [
        { "expr": "node_memory_MemTotal_bytes{site=\"$site\"} - node_memory_MemAvailable_bytes{site=\"$site\"}", "legendFormat": "Used", "refId": "A" },
        { "expr": "node_memory_MemAvailable_bytes{site=\"$site\"}", "legendFormat": "Available", "refId": "B" }
      ],
      "title": "Memory Usage Over Time",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" },
      "fieldConfig": {
        "defaults": {
          "custom": { "drawStyle": "line", "fillOpacity": 20, "lineWidth": 2 },
          "unit": "Bps"
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 12 },
      "id": 9,
      "targets": [
        { "expr": "rate(node_network_receive_bytes_total{device!=\"lo\",site=\"$site\"}[1m])", "legendFormat": "RX {{device}}", "refId": "A" },
        { "expr": "-rate(node_network_transmit_bytes_total{device!=\"lo\",site=\"$site\"}[1m])", "legendFormat": "TX {{device}}", "refId": "B" }
      ],
      "title": "Network Traffic",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" },
      "fieldConfig": {
        "defaults": {
          "custom": { "drawStyle": "line", "fillOpacity": 20, "lineWidth": 2 },
          "unit": "Bps"
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 12 },
      "id": 10,
      "targets": [
        { "expr": "rate(node_disk_read_bytes_total{site=\"$site\"}[1m])", "legendFormat": "Read {{device}}", "refId": "A" },
        { "expr": "-rate(node_disk_written_bytes_total{site=\"$site\"}[1m])", "legendFormat": "Write {{device}}", "refId": "B" }
      ],
      "title": "Disk I/O",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" },
      "fieldConfig": {
        "defaults": {
          "custom": { "drawStyle": "line", "lineWidth": 2 },
          "unit": "celsius",
          "thresholds": { "mode": "absolute", "steps": [
            { "color": "green", "value": null },
            { "color": "yellow", "value": 60 },
            { "color": "red", "value": 80 }
          ]}
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 20 },
      "id": 11,
      "targets": [
        { "expr": "node_hwmon_temp_celsius{site=\"$site\"}", "legendFormat": "{{chip}}", "refId": "A" }
      ],
      "title": "Temperature Over Time",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "PBFA97CFB590B2093" },
      "fieldConfig": {
        "defaults": { "custom": { "drawStyle": "line", "lineWidth": 2 } }
      },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 20 },
      "id": 12,
      "targets": [
        { "expr": "node_load1{site=\"$site\"}", "legendFormat": "1m", "refId": "A" },
        { "expr": "node_load5{site=\"$site\"}", "legendFormat": "5m", "refId": "B" },
        { "expr": "node_load15{site=\"$site\"}", "legendFormat": "15m", "refId": "C" }
      ],
      "title": "Load Average",
      "type": "timeseries"
    }
  ],
  "refresh": "10s",
  "schemaVersion": 38,
  "tags": ["system", "avero"],
  "templating": {
    "list": [
      {
        "current": { "selected": true, "text": "NETTO-GRANDI", "value": "NETTO-GRANDI" },
        "hide": 0,
        "includeAll": false,
        "label": "Site",
        "multi": false,
        "name": "site",
        "options": [
          { "selected": true, "text": "NETTO-GRANDI", "value": "NETTO-GRANDI" },
          { "selected": false, "text": "AVERO-HQ", "value": "AVERO-HQ" }
        ],
        "query": "NETTO-GRANDI,AVERO-HQ",
        "skipUrlSync": false,
        "type": "custom"
      }
    ]
  },
  "time": { "from": "now-1h", "to": "now" },
  "timezone": "Atlantic/Reykjavik",
  "title": "System Stats",
  "uid": "system-stats",
  "version": 1
}
